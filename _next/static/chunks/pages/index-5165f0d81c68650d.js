(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,n,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(9838)}])},9838:function(e,n,a){"use strict";a.r(n),a.d(n,{default:function(){return ey}});var l,r=a(5893),s=a(8664),t=a(3523),o=a(7564),i=a(9876),c=a(7841),d=a(7294),h=a(353),u=a(9236),x=a(4685),g=a(6768);let j=e=>{let{size:n,...a}=e;return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:(0,g.h)(n),height:(0,g.h)(n),fill:"currentColor",...a,children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"})})},m=()=>(0,r.jsx)(h.h,{height:60,p:"xs",children:(0,r.jsxs)(i.k,{justify:"space-between",align:"center",children:[(0,r.jsx)(u.D,{order:3,children:(0,r.jsx)(x.e,{href:"https://ran350.github.io/ja-wordcloud/",color:"gray.7",underline:!1,children:"Japanese Word Cloud"})}),(0,r.jsx)(x.e,{href:"https://github.com/ran350/ja-wordcloud"}),(0,r.jsx)(j,{size:30})]})});var p=a(3765),f=a(7860),w=a(9834),v=a(3723),C=a(7789),b=a(1238),k=a(4707),S=a(7283),y=a(9463),M=a(1759);let P=e=>{let{onClearAll:n}=e,[a,{open:l,close:s}]=(0,M.q)(!1),o=()=>{n(),s()};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.z,{compact:!0,fullWidth:!0,variant:"outline",color:"gray",onClick:l,children:"すべて削除する"}),(0,r.jsxs)(y.u,{opened:a,onClose:s,title:"確認",children:["ストップワードをすべて削除しますか？",(0,r.jsx)(t.M,{mt:"lg",children:(0,r.jsx)(c.z,{variant:"filled",color:"red",onClick:o,children:"すべて削除する"})})]})]})};var R=a(3241),z=a(5593),W=a(5117),E=a(7084),F=a(8818),O=a(64),T=a(2162);let _=e=>{let{onClick:n}=e,a=(0,R.rZ)(),l=(0,O.i)(),[s,{close:o,open:i}]=(0,M.q)(!1);return(0,r.jsxs)(z.J,{width:100,position:"top",withArrow:!0,shadow:"md",opened:s,children:[(0,r.jsx)(z.J.Target,{children:(0,r.jsx)(w.A,{size:32,radius:"xl",color:a.primaryColor,variant:"filled",onMouseEnter:i,onMouseLeave:o,onClick:n,children:(0,r.jsx)(T.Z,{size:"1.1rem",stroke:1.5})})}),(0,r.jsxs)(z.J.Dropdown,{sx:{pointerEvents:"none"},style:{backgroundColor:a.colors.gray[1]},children:[(0,r.jsx)(W.x,{size:"sm",children:"ストップワードを追加する"}),(0,r.jsxs)(t.M,{children:[(0,r.jsx)(E.E,{color:"gray",children:"macos"===l?"⌘":"Ctrl"}),(0,r.jsx)(F.T,{w:"xs"}),(0,r.jsx)(E.E,{children:"Enter"})]})]})]})},D=e=>{let{onReset:n}=e,[a,{open:l,close:s}]=(0,M.q)(!1),o=()=>{n(),s()};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.z,{compact:!0,fullWidth:!0,variant:"outline",color:"gray",onClick:l,children:"初期化する"}),(0,r.jsxs)(y.u,{opened:a,onClose:s,title:"確認",children:["ストップワードの登録を初期化しますか？",(0,r.jsx)(t.M,{mt:"lg",children:(0,r.jsx)(c.z,{variant:"filled",color:"red",onClick:o,children:"初期化する"})})]})]})},K=(0,r.jsx)(w.A,{size:"xs",color:"blue",radius:"xl",variant:"transparent",children:(0,r.jsx)(S.Z,{size:(0,g.h)(10)})}),N=e=>{let{stopWord:n}=e,[a,l]=(0,d.useState)(""),s=()=>{let e=a.split("\n").filter(e=>""!==e).filter(e=>!n.list.includes(e));n.append(...new Set(e)),l("")};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.w.Section,{grow:!0,component:v.x,mt:"md",children:(0,r.jsx)(i.k,{wrap:"wrap",gap:"xs",children:n.list.map((e,a)=>(0,r.jsx)(C.C,{variant:"outline",pr:3,rightSection:K,onClick:()=>n.remove(a),children:e},e))})}),(0,r.jsx)(p.w.Section,{mt:"xl",children:(0,r.jsxs)(o.K,{children:[(0,r.jsx)(b.g,{label:"ストップワード",description:"改行区切りで複数のストップワードを追加できます",placeholder:"新しいストップワード",radius:"xl",minRows:1,autosize:!0,rightSectionWidth:42,rightSection:(0,r.jsx)(_,{onClick:s}),value:a,onChange:e=>l(e.target.value),onKeyDown:(0,k.yr)([["mod+Enter",s]])}),(0,r.jsxs)(i.k,{justify:"space-between",gap:10,children:[(0,r.jsx)(D,{onReset:n.reset}),(0,r.jsx)(P,{onClearAll:n.setEmpty})]})]})})]})};var J=a(6143);let G=e=>(0,r.jsx)(J.T,{label:"背景色",value:e.color,color:e.color,onChangeEnd:e.onChange});var I=a(8791);let L=e=>(0,r.jsx)(I.r,{labelPosition:"left",label:"グリッドのマスク",checked:e.isDrawMask,onChange:e.onToggle}),A=e=>(0,r.jsx)(o.K,{spacing:"xs",children:e.colors.map((e,n)=>{let{color:a,onChange:l}=e;return(0,r.jsx)(J.T,{label:0===n?"フォントの色":void 0,value:a,color:a,onChangeEnd:l},n)})});var V=a(2445);let q={1:{name:"Dela Gothic One ",css:"'Dela Gothic One', cursive"},2:{name:"DotGothic16",css:"'DotGothic16', sans-serif"},3:{name:"Hachi Maru Pop",css:"'Hachi Maru Pop', cursive"},4:{name:"Kaisei Tokumin",css:"'Kaisei Tokumin', serif"},5:{name:"Kiwi Maru",css:"'Kiwi Maru', serif"},6:{name:"M PLUS 1",css:"'M PLUS 1', sans-serif"},7:{name:"M PLUS Rounded 1c",css:"'M PLUS Rounded 1c', sans-serif"},8:{name:"Mochiy Pop One",css:"'Mochiy Pop One', sans-serif"},9:{name:"Noto Sans JP",css:"'Noto Sans JP', sans-serif"},10:{name:"Noto Serif JP",css:"'Noto Serif JP', serif"},11:{name:"Potta One",css:"'Potta One', cursive"},12:{name:"Rampart One",css:"'Rampart One', cursive"},13:{name:"RocknRoll One",css:"'RocknRoll One', sans-serif"},14:{name:"Sawarabi Mincho",css:"'Sawarabi Mincho', serif"},15:{name:"Train One",css:"'Train One', cursive"},16:{name:"Yuji Syuku",css:"'Yuji Syuku', serif"}},U=(0,d.forwardRef)(function(e,n){let{label:a,css:l,...s}=e;return(0,r.jsx)("div",{ref:n,...s,children:(0,r.jsxs)(i.k,{justify:"space-between",children:[(0,r.jsx)(W.x,{children:a}),(0,r.jsx)(W.x,{sx:{fontFamily:l},children:"サンプル"})]})})}),Y=e=>{let{fontFamilyId:n,onChange:a}=e;return(0,r.jsx)(V.Ph,{label:"フォント",placeholder:"フォント",itemComponent:U,maxDropdownHeight:400,data:Object.entries(q).map(e=>{let[n,{name:a,css:l}]=e;return{value:n,label:a,fontFamily:l}}),defaultValue:n,onChange:a})},H=[100,200,300,400,500,600,700,800,900,"normal","bold","bolder","lighter"],Z=e=>(0,r.jsx)(V.Ph,{label:"フォントの太さ",placeholder:"フォントの太さ",value:e.fontWeight,data:H.map(e=>({value:"".concat(e),label:"".concat(e)})),onChange:e.onChange});var X=a(4271);let B=e=>(0,r.jsx)(X.Y,{label:"グリッドの大きさ",placeholder:"グリッドの大きさ",value:e.gridSize,onChange:e.onChange}),Q=e=>{let{color:n,disabled:a,onChange:l}=e;return(0,r.jsx)(J.T,{disabled:a,label:"マスクの色",value:n,color:n,onChangeEnd:l})},$=e=>{let{maskWidth:n,disabled:a,onChange:l}=e;return(0,r.jsx)(X.Y,{label:"マスクの大きさ",placeholder:"マスクの大きさ",disabled:a,value:n,onChange:l})};var ee=a(4151),en=a(5050);let ea=e=>(0,r.jsx)(ee.I.Wrapper,{label:"ワードの回転確率",children:(0,r.jsx)(en.i,{defaultValue:0,label:e=>"".concat(e,"%"),mb:"xl",marks:[{value:0,label:"0%"},{value:50,label:"50%"},{value:100,label:"100%"}],value:e.rotationRatio,onChangeEnd:e.onChange})}),el=["circle","cardioid","diamond","square","triangle-forward","triangle","pentagon","star"],er=e=>(0,r.jsx)(V.Ph,{label:"クラウドの形状",placeholder:"クラウドの形状",value:e.shape,data:el.map(e=>({value:e,label:e})),onChange:e.onChange}),es=e=>{let{form:n,setForm:a}=e;return(0,r.jsx)(p.w.Section,{grow:!0,component:v.x,mt:"md",children:(0,r.jsxs)(o.K,{spacing:"sm",align:"stretch",children:[(0,r.jsx)(Y,{fontFamilyId:n.fontFamilyId,onChange:e=>a("fontFamilyId",e)}),(0,r.jsx)(Z,{fontWeight:"".concat(n.fontWeight),onChange:e=>a("fontWeight",e)}),(0,r.jsx)(A,{colors:n.colors.map((e,l)=>({color:e,onChange:e=>a("colors",n.colors.map((n,a)=>l===a?e:n))}))}),(0,r.jsx)(G,{color:n.backgroundColor,onChange:e=>a("backgroundColor",e)}),(0,r.jsx)(B,{gridSize:n.gridSize,onChange:e=>a("gridSize",e)}),(0,r.jsx)(er,{shape:n.shape,onChange:e=>a("shape",e)}),(0,r.jsx)(ea,{rotationRatio:n.rotateRatio,onChange:e=>a("rotateRatio",e)}),(0,r.jsx)(L,{isDrawMask:n.drawMask,onToggle:()=>a("drawMask",!n.drawMask)}),(0,r.jsx)(Q,{color:n.maskColor,disabled:!n.drawMask,onChange:e=>a("maskColor",e)}),(0,r.jsx)($,{maskWidth:n.maskGapWidth,disabled:!n.drawMask,onChange:e=>a("maskGapWidth",e)})]})})},et=e=>{let{wcStyleFormProps:n,stopWordProps:a}=e,[l,s]=(0,d.useState)("wcStyle"),t={wcStyle:(0,r.jsx)(es,{...n}),stopWord:(0,r.jsx)(N,{...a})};return(0,r.jsxs)(p.w,{px:"xl",py:"md",height:600,width:{base:300},children:[(0,r.jsx)(p.w.Section,{children:(0,r.jsx)(f.s,{value:l,onChange:e=>s(e),transitionTimingFunction:"ease",fullWidth:!0,data:[{label:"Style",value:"wcStyle"},{label:"Stop Word",value:"stopWord"}]})}),t[l]]})},eo=e=>{let{placeholder:n,onChangeText:a}=e,l=e=>{a(e.currentTarget.value)};return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(b.g,{placeholder:n,autosize:!0,minRows:4,maxRows:5,onChange:l})})},ei=e=>(n,a,l)=>l>=32?e[0]:l>16?e[1]:e[2],ec=e=>(console.log(e),{...e,fontFamily:q[e.fontFamilyId].css,color:ei(e.colors),weightFactor:e=>(11*e)**1.1});var ed=a(8771),eh=a.n(ed);let eu=e=>{console.time("seg");let n=new(eh()),a=n.segment(e);return console.timeEnd("seg"),a},ex=(e,n)=>e.filter(e=>!n.includes(e)),eg=e=>Object.entries(e.reduce((e,n)=>({...e,[n]:(null!==(l=e[n])&&void 0!==l?l:0)+1}),{})),ej=(e,n)=>{let a=eu(e),l=ex(a,n);return eg(l)},em=e=>{let{sentence:n,stopWordList:l,wcStyleOption:s,magnification:t}=e,o=(0,d.useRef)(null);return(0,d.useEffect)(()=>{let e=ej(n,l);a.e(83).then(a.t.bind(a,5083,23)).then(n=>{let{default:a}=n;null!==o.current&&a(o.current,{list:e,...ec(s)})})},[n,s,l]),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("canvas",{ref:o,id:"canvas",width:16*t,height:9*t})})},ep="吾輩は猫である。名前はまだ無い。\nどこで生れたかとんと見当がつかぬ。何でも薄暗いじめじめした所でニャーニャー泣いていた事だけは記憶している。吾輩はここで始めて人間というものを見た。しかもあとで聞くとそれは書生という人間中で一番獰悪な種族であったそうだ。この書生というのは時々我々を捕えて煮て食うという話である。しかしその当時は何という考もなかったから別段恐しいとも思わなかった。ただ彼の掌に載せられてスーと持ち上げられた時何だかフワフワした感じがあったばかりである。掌の上で少し落ちついて書生の顔を見たのがいわゆる人間というものの見始であろう。この時妙なものだと思った感じが今でも残っている。第一毛をもって装飾されべきはずの顔がつるつるしてまるで薬缶だ。その後猫にもだいぶ逢ったがこんな片輪には一度も出会わした事がない。のみならず顔の真中があまりに突起している。そうしてその穴の中から時々ぷうぷうと煙を吹く。どうも咽せぽくて実に弱った。これが人間の飲む煙草というものである事はようやくこの頃知った。";var ef=a(8528);let ew=["が","の","を","に","へ","で","と","や","ば","と","し","て","は","も","か","な","ね","ぞ","よ","わ","れ","せ","ね","た","だ","う","0","1","2","3","4","5","6","7","8","9",".",",","．","，","。","、","「","」","\n","(",")","（","）","'","’","・"],ev=()=>{let[e,n]=(0,ef.n)(ew),a=()=>n.setState(ew),l=n.append,r=e=>n.remove(e),s=()=>n.setState([]);return{list:e,reset:a,append:l,remove:r,setEmpty:s}};var eC=a(7248);let eb={fontFamilyId:"1",fontWeight:"normal",colors:["#285943","#77af9c","#8cd790"],backgroundColor:"#f4f7f7",minSize:0,gridSize:10,drawMask:!1,maskColor:"#555555",maskGapWidth:20,minRotation:-90,maxRotation:90,rotationSteps:2,rotateRatio:.5,shape:"circle"},ek=()=>{let{values:e,setFieldValue:n}=(0,eC.c)({initialValues:eb});return{form:e,setForm:n}},eS=()=>{let{form:e,setForm:n}=ek(),a=ev(),[l,h]=(0,d.useState)(ep),[u,x]=(0,d.useState)(ep),g=()=>h(u);return(0,r.jsx)(s.V,{padding:"md",header:(0,r.jsx)(m,{}),navbar:(0,r.jsx)(et,{wcStyleFormProps:{form:e,setForm:n},stopWordProps:{stopWord:a}}),children:(0,r.jsx)(t.M,{children:(0,r.jsxs)(o.K,{style:{width:"800px"},children:[(0,r.jsx)(em,{sentence:l,stopWordList:a.list,wcStyleOption:e,magnification:50}),(0,r.jsx)(eo,{placeholder:ep,onChangeText:x}),(0,r.jsx)(i.k,{justify:"flex-end",children:(0,r.jsx)(c.z,{size:"md",color:"green",onClick:g,children:"生成する"})})]})})})};var ey=eS}},function(e){e.O(0,[102,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);