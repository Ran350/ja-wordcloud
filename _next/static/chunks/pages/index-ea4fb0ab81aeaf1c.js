(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,l,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(4787)}])},4787:function(e,l,a){"use strict";a.r(l),a.d(l,{default:function(){return eZ}});var r,t=a(5893),n=a(8664),i=a(3523),s=a(7564),o=a(9876),c=a(7841),d=a(7294),u=a(353),h=a(9236),x=a(4685),m=a(6768);let p=e=>{let{size:l,...a}=e;return(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:(0,m.h)(l),height:(0,m.h)(l),fill:"currentColor",...a,children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"})})},f=()=>(0,t.jsx)(u.h,{height:60,p:"xs",children:(0,t.jsxs)(o.k,{justify:"space-between",align:"center",children:[(0,t.jsx)(h.D,{order:3,children:(0,t.jsx)(x.e,{href:"https://ran350.github.io/ja-wordcloud/","aria-label":"Japanese WordCloud",color:"gray.7",underline:!1,children:"Japanese WordCloud"})}),(0,t.jsx)(x.e,{href:"https://github.com/ran350/ja-wordcloud","aria-label":"GitHub"}),(0,t.jsx)(p,{size:30})]})});var j=a(3765),g=a(7860),b=a(3723),P=a(7789),v=a(9834),w=a(1238),k=a(4707),Z=a(7283),C=a(9463),S=a(1759);let y=e=>{let{onClearAll:l}=e,[a,{open:r,close:n}]=(0,S.q)(!1),s=()=>{l(),n()};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.z,{compact:!0,fullWidth:!0,variant:"outline",color:"gray",onClick:r,children:"すべて削除する"}),(0,t.jsxs)(C.u,{opened:a,onClose:n,title:"確認",children:["ストップワードをすべて削除しますか？",(0,t.jsx)(i.M,{mt:"lg",children:(0,t.jsx)(c.z,{variant:"filled",color:"red",onClick:s,children:"すべて削除する"})})]})]})};var F=a(3241),z=a(5593),W=a(5117),M=a(7084),R=a(8818),E=a(64),I=a(2162);let T=e=>{let{onClick:l}=e,a=(0,F.rZ)(),r=(0,E.i)(),[n,{close:s,open:o}]=(0,S.q)(!1);return(0,t.jsxs)(z.J,{width:100,position:"top",withArrow:!0,shadow:"md",opened:n,children:[(0,t.jsx)(z.J.Target,{children:(0,t.jsx)(v.A,{size:32,radius:"xl",color:a.primaryColor,variant:"filled",onMouseEnter:o,onMouseLeave:s,onClick:l,children:(0,t.jsx)(I.Z,{size:"1.1rem",stroke:1.5})})}),(0,t.jsxs)(z.J.Dropdown,{sx:{pointerEvents:"none"},style:{backgroundColor:a.colors.gray[1]},children:[(0,t.jsx)(W.x,{size:"sm",children:"ストップワードを追加する"}),(0,t.jsxs)(i.M,{children:[(0,t.jsx)(M.E,{color:"gray",children:"macos"===r?"⌘":"Ctrl"}),(0,t.jsx)(R.T,{w:"xs"}),(0,t.jsx)(M.E,{children:"Enter"})]})]})]})},_=e=>{let{onReset:l}=e,[a,{open:r,close:n}]=(0,S.q)(!1),s=()=>{l(),n()};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.z,{compact:!0,fullWidth:!0,variant:"outline",color:"gray",onClick:r,children:"初期化する"}),(0,t.jsxs)(C.u,{opened:a,onClose:n,title:"確認",children:["ストップワードの登録を初期化しますか？",(0,t.jsx)(i.M,{mt:"lg",children:(0,t.jsx)(c.z,{variant:"filled",color:"red",onClick:s,children:"初期化する"})})]})]})},O=e=>{let{stopWord:l}=e,[a,r]=(0,d.useState)(""),n=()=>{let e=a.split("\n").filter(e=>""!==e).filter(e=>!l.list.includes(e));l.append(...new Set(e)),r("")};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j.w.Section,{grow:!0,component:b.x,mt:"md",children:(0,t.jsx)(o.k,{wrap:"wrap",gap:"xs",children:l.list.map((e,a)=>(0,t.jsx)(P.C,{variant:"outline",pr:3,rightSection:(0,t.jsx)(v.A,{size:"xs",color:"blue",radius:"xl",variant:"transparent",children:(0,t.jsx)(Z.Z,{size:(0,m.h)(10)})}),onClick:()=>l.remove(a),children:e},e))})}),(0,t.jsx)(j.w.Section,{mt:"xl",children:(0,t.jsxs)(s.K,{children:[(0,t.jsx)(w.g,{label:"ストップワード",description:"改行区切りで複数のストップワードを追加できます",placeholder:"新しいストップワード",radius:"xl",minRows:1,autosize:!0,rightSectionWidth:42,rightSection:(0,t.jsx)(T,{onClick:n}),value:a,onChange:e=>r(e.target.value),onKeyDown:(0,k.yr)([["mod+Enter",n]])}),(0,t.jsxs)(o.k,{justify:"space-between",gap:10,children:[(0,t.jsx)(_,{onReset:l.reset}),(0,t.jsx)(y,{onClearAll:l.setEmpty})]})]})})]})};var N=a(2445),V=a(6143),J=a(4271),K=a(4151),D=a(5050),q=a(8791);let A=(0,d.forwardRef)(function(e,l){let{label:a,fontFamily:r,...n}=e;return(0,t.jsx)("div",{ref:l,...n,children:(0,t.jsxs)(o.k,{justify:"space-between",children:[(0,t.jsx)(W.x,{sx:{fontFamily:r},children:a}),(0,t.jsx)(W.x,{sx:{fontFamily:r},children:"サンプル"})]})})}),G=e=>{let{data:l,defaultValue:a,onChange:r,fontFamily:n}=e;return(0,t.jsx)(N.Ph,{label:"フォント",placeholder:"フォント",itemComponent:A,maxDropdownHeight:400,data:l,defaultValue:a,onChange:r,styles:e=>({input:{fontFamily:n,color:e.colors.gray}})})},H=[{name:"M PLUS 1",fallbacks:["sans-serif"]},{name:"Dela Gothic One",fallbacks:["cursive"]},{name:"DotGothic16",fallbacks:["sans-serif"]},{name:"Hachi Maru Pop",fallbacks:["cursive"]},{name:"Kaisei Tokumin",fallbacks:["serif"]},{name:"Kiwi Maru",fallbacks:["serif"]},{name:"M PLUS Rounded 1c",fallbacks:["sans-serif"]},{name:"Mochiy Pop One",fallbacks:["sans-serif"]},{name:"Noto Sans JP",fallbacks:["sans-serif"]},{name:"Noto Serif JP",fallbacks:["serif"]},{name:"Potta One",fallbacks:["cursive"]},{name:"Rampart One",fallbacks:["cursive"]},{name:"RocknRoll One",fallbacks:["sans-serif"]},{name:"Sawarabi Mincho",fallbacks:["serif"]},{name:"Train One",fallbacks:["cursive"]},{name:"Yuji Syuku",fallbacks:["serif"]}],L=e=>{let{name:l,fallbacks:a}=e;return["'".concat(l,"'"),...a].join(",")},Y=[100,200,300,400,500,600,700,800,900,"normal","bold","bolder","lighter"];var U=a(6801),X=a(892),B=a(1604);let Q=B.ZP.custom(e=>/#\d{6}/.test(e)),$=B.ZP.union([B.ZP.literal(0),B.ZP.literal(1),B.ZP.literal(2),B.ZP.literal(3),B.ZP.literal(4),B.ZP.literal(5),B.ZP.literal(6),B.ZP.literal(7),B.ZP.literal(8),B.ZP.literal(9),B.ZP.literal(10),B.ZP.literal(11),B.ZP.literal(12),B.ZP.literal(13),B.ZP.literal(14),B.ZP.literal(15)]),ee=B.ZP.union([B.ZP.literal(100),B.ZP.literal(200),B.ZP.literal(300),B.ZP.literal(400),B.ZP.literal(500),B.ZP.literal(600),B.ZP.literal(700),B.ZP.literal(800),B.ZP.literal(900),B.ZP.literal("normal"),B.ZP.literal("bold"),B.ZP.literal("bolder"),B.ZP.literal("lighter")]),el=B.ZP.enum(["circle","cardioid","diamond","square","triangle-forward","triangle","pentagon","star"]),ea=B.ZP.object({fontFamiliesIndex:$,fontWeight:ee,backgroundColor:Q,minSize:B.ZP.number(),gridSize:B.ZP.number(),drawMask:B.ZP.boolean(),maskGapWidth:B.ZP.number(),minRotation:B.ZP.number(),maxRotation:B.ZP.number(),rotationSteps:B.ZP.number(),rotateRatio:B.ZP.number(),shape:el,maskColor:B.ZP.string(),colors:B.ZP.tuple([Q,Q,Q]).rest(B.ZP.never())}),[er,et,en]=(0,U.W)(),ei=()=>en({initialValues:{fontFamiliesIndex:0,fontWeight:"normal",colors:["#285943","#77af9c","#8cd790"],backgroundColor:"#f4f7f7",minSize:0,gridSize:10,drawMask:!1,maskColor:"#555555",maskGapWidth:20,minRotation:-90,maxRotation:90,rotationSteps:2,rotateRatio:.5,shape:"circle"},validate:(0,X.F)(ea)}),es=()=>{let e=et();return(0,t.jsx)(j.w.Section,{grow:!0,component:b.x,mt:"md",children:(0,t.jsxs)(s.K,{spacing:"sm",align:"stretch",children:[(0,t.jsx)(G,{data:H.map((e,l)=>({value:"".concat(l),label:e.name,fontFamily:L(e)})),defaultValue:"".concat(e.values.fontFamiliesIndex),onChange:l=>{e.setFieldValue("fontFamiliesIndex",Number(l)),e.validateField("fontFamiliesIndex")},fontFamily:H[e.values.fontFamiliesIndex].name}),(0,t.jsx)(N.Ph,{label:"フォントの太さ",placeholder:"フォントの太さ",data:Y.map(e=>({value:"".concat(e),label:"".concat(e)})),...e.getInputProps("fontWeight")}),(0,t.jsx)(s.K,{spacing:"xs",children:e.values.colors.map((l,a)=>(0,t.jsx)(V.T,{label:0===a?"フォントの色":void 0,value:l,color:l,onChangeEnd:l=>{e.setFieldValue("colors",e.values.colors.map((e,r)=>r===a?l:e)),e.validateField("colors")}},a))}),(0,t.jsx)(V.T,{label:"背景色",...e.getInputProps("backgroundColor")}),(0,t.jsx)(J.Y,{label:"グリッドの大きさ",placeholder:"グリッドの大きさ",...e.getInputProps("gridSize")}),(0,t.jsx)(N.Ph,{label:"クラウドの形状",placeholder:"クラウドの形状",data:["circle","cardioid","diamond","square","triangle-forward","triangle","pentagon","star"].map(e=>({value:e,label:e})),...e.getInputProps("shape")}),(0,t.jsx)(K.I.Wrapper,{label:"ワードの回転確率",children:(0,t.jsx)(D.i,{defaultValue:0,label:e=>"".concat(e,"%"),mb:"xl",marks:[{value:0,label:"0%"},{value:50,label:"50%"},{value:100,label:"100%"}],...e.getInputProps("rotateRatio")})}),(0,t.jsx)(q.r,{labelPosition:"left",label:"グリッドのマスク",...e.getInputProps("drawMask")}),(0,t.jsx)(V.T,{disabled:!e.values.drawMask,label:"マスクの色",...e.getInputProps("maskColor")}),(0,t.jsx)(J.Y,{label:"マスクの大きさ",placeholder:"マスクの大きさ",disabled:!e.values.drawMask,...e.getInputProps("maskWidth")})]})})},eo=e=>{let{stopWordProps:l}=e,[a,r]=(0,d.useState)("wcStyle"),n={wcStyle:(0,t.jsx)(es,{}),stopWord:(0,t.jsx)(O,{...l})};return(0,t.jsxs)(j.w,{px:"xl",py:"md",height:600,width:{base:300},children:[(0,t.jsx)(j.w.Section,{children:(0,t.jsx)(g.s,{value:a,onChange:e=>r(e),transitionTimingFunction:"ease",fullWidth:!0,data:[{label:"Style",value:"wcStyle"},{label:"Stop Word",value:"stopWord"}]})}),n[a]]})},ec=e=>{let{placeholder:l,onChangeText:a}=e,r=e=>{a(e.currentTarget.value)};return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(w.g,{placeholder:l,autosize:!0,minRows:4,maxRows:5,onChange:r})})};var ed=a(8771),eu=a.n(ed);let eh=e=>{console.time("seg");let l=new(eu()),a=l.segment(e);return console.timeEnd("seg"),a},ex=(e,l)=>e.filter(e=>!l.includes(e)),em=e=>Object.entries(e.reduce((e,l)=>({...e,[l]:(null!==(r=e[l])&&void 0!==r?r:0)+1}),{})),ep=(e,l)=>{let a=eh(e),r=ex(a,l);return em(r)},ef=e=>{let{sentence:l,stopWordList:r,wcOptions:n,magnification:i}=e,s=(0,d.useRef)(null);return(0,d.useEffect)(()=>{let e=ep(l,r);a.e(83).then(a.t.bind(a,5083,23)).then(l=>{let{default:a}=l;null!==s.current&&a(s.current,{list:e,...n})})},[l,r,n]),(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("canvas",{ref:s,id:"canvas",width:16*i,height:9*i})})};var ej=a(8528);let eg=["が","の","を","に","へ","で","と","や","ば","と","し","て","は","も","か","な","ね","ぞ","よ","わ","れ","せ","ね","た","だ","う","0","1","2","3","4","5","6","7","8","9",".",",","．","，","。","、","「","」","\n","(",")","（","）","'","’","・"],eb=()=>{let[e,l]=(0,ej.n)(eg),a=()=>l.setState(eg),r=l.append,t=e=>l.remove(e),n=()=>l.setState([]);return{list:e,reset:a,append:r,remove:t,setEmpty:n}},eP=e=>(l,a,r)=>r>32?e[0]:r>16?e[1]:e[2],ev=e=>{console.log("formValues",e);let{fontFamiliesIndex:l,colors:a,...r}=e,t={...r,fontFamily:L(H[l]),color:eP(a),weightFactor:e=>(11*e)**1.1};return console.log("wcOptions",t),t},ew="吾輩は猫である。名前はまだ無い。どこで生れたかとんと見当がつかぬ。何でも薄暗いじめじめした所でニャーニャー泣いていた事だけは記憶している。吾輩はここで始めて人間というものを見た。しかもあとで聞くとそれは書生という人間中で一番獰悪な種族であったそうだ。この書生というのは時々我々を捕えて煮て食うという話である。しかしその当時は何という考もなかったから別段恐しいとも思わなかった。ただ彼の掌に載せられてスーと持ち上げられた時何だかフワフワした感じがあったばかりである。掌の上で少し落ちついて書生の顔を見たのがいわゆる人間というものの見始であろう。この時妙なものだと思った感じが今でも残っている。第一毛をもって装飾されべきはずの顔がつるつるしてまるで薬缶だ。その後猫にもだいぶ逢ったがこんな片輪には一度も出会わした事がない。のみならず顔の真中があまりに突起している。そうしてその穴の中から時々ぷうぷうと煙を吹く。どうも咽せぽくて実に弱った。これが人間の飲む煙草というものである事はようやくこの頃知った。",ek=()=>{let e=ei(),l=eb(),[a,r]=(0,d.useState)(ew),[u,h]=(0,d.useState)(ew),x=()=>r(u);return(0,t.jsx)(er,{form:e,children:(0,t.jsx)(n.V,{padding:"md",header:(0,t.jsx)(f,{}),navbar:(0,t.jsx)(eo,{stopWordProps:{stopWord:l}}),children:(0,t.jsx)(i.M,{children:(0,t.jsxs)(s.K,{style:{maxWidth:"100%",maxHeight:"100%"},children:[(0,t.jsx)(ef,{sentence:a,stopWordList:l.list,wcOptions:ev(e.values),magnification:50}),(0,t.jsx)(ec,{placeholder:ew,onChangeText:h}),(0,t.jsx)(o.k,{justify:"flex-end",children:(0,t.jsx)(c.z,{size:"md",color:"green.9",onClick:x,children:"生成する"})})]})})})})};var eZ=ek}},function(e){e.O(0,[146,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);